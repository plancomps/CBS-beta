\begin{displaymath}
\KEY{Language} \STRING{SL}
\end{displaymath}

\begin{align*}
  [ ~ 
  \KEY{Funcon} ~ & \NAMEREF{sl-to-string} \\
  \KEY{Funcon} ~ & \NAMEREF{integer-add-else-string-append} \\
  \KEY{Funcon} ~ & \NAMEREF{int} \\
  \KEY{Funcon} ~ & \NAMEREF{bool} \\
  \KEY{Funcon} ~ & \NAMEREF{str} \\
  \KEY{Funcon} ~ & \NAMEREF{obj} \\
  \KEY{Funcon} ~ & \NAMEREF{fun} \\
  \KEY{Funcon} ~ & \NAMEREF{scope-closed} \\
  \KEY{Funcon} ~ & \NAMEREF{initialise-local-variables} \\
  \KEY{Funcon} ~ & \NAMEREF{local-variable} \\
  \KEY{Funcon} ~ & \NAMEREF{local-variable-initialise} \\
  \KEY{Funcon} ~ & \NAMEREF{local-variable-assign} \\
  \KEY{Funcon} ~ & \NAMEREF{initialise-global-bindings} \\
  \KEY{Funcon} ~ & \NAMEREF{override-global-bindings} \\
  \KEY{Funcon} ~ & \NAMEREF{global-bound} \\
  \KEY{Funcon} ~ & \NAMEREF{read-line} \\
  \KEY{Funcon} ~ & \NAMEREF{print-line}
  ~ ]
\end{align*}
\section*{SL-specific funcons}\hypertarget{sl-specific-funcons}{}\label{sl-specific-funcons}

\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{sl-to-string}(\VAR{V} : \NAMEHYPER{../.}{SL-2-Expressions}{sl-values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Strings}{strings}
\\
  \KEY{Rule} ~ 
    & \NAMEREF{sl-to-string}
        ( \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Null}{null-value} ) \leadsto
        \STRING{null}
\\
  \KEY{Rule} ~ 
    & \NAMEREF{sl-to-string}
        ( \VAR{V} : \mathop{\sim} \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Null}{null-type} ) \leadsto
        \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Strings}{to-string}
          ( \VAR{V} )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{integer-add-else-string-append}(\VAR{V}\SUB{1} : \NAMEHYPER{../.}{SL-2-Expressions}{sl-values}, \VAR{V}\SUB{2} : \NAMEHYPER{../.}{SL-2-Expressions}{sl-values}) :  \TO \NAMEHYPER{../.}{SL-2-Expressions}{sl-values} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{else}
                     ( \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Integers}{integer-add}
                         ( \NAMEREF{int} ~
                             \VAR{V}\SUB{1}, \\&\quad \quad \quad \quad \quad 
                           \NAMEREF{int} ~
                             \VAR{V}\SUB{2} ), \\&\quad \quad \quad \quad 
                       \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Strings}{string-append}
                         ( \NAMEREF{sl-to-string} ~
                             \VAR{V}\SUB{1}, \\&\quad \quad \quad \quad \quad 
                           \NAMEREF{sl-to-string} ~
                             \VAR{V}\SUB{2} ) )
\end{align*}
\section*{Abbreviations}\hypertarget{abbreviations}{}\label{abbreviations}

\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{int}(\VAR{V} : \NAMEHYPER{../.}{SL-2-Expressions}{sl-values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Integers}{integers} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{checked} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{cast-to-type}
                       ( \VAR{V}, \\&\quad \quad \quad \quad \quad 
                         \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Integers}{integers} )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{bool}(\VAR{V} : \NAMEHYPER{../.}{SL-2-Expressions}{sl-values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Booleans}{booleans} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{checked} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{cast-to-type}
                       ( \VAR{V}, \\&\quad \quad \quad \quad \quad 
                         \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Booleans}{booleans} )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{str}(\VAR{V} : \NAMEHYPER{../.}{SL-2-Expressions}{sl-values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Strings}{strings} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{checked} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{cast-to-type}
                       ( \VAR{V}, \\&\quad \quad \quad \quad \quad 
                         \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Strings}{strings} )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{obj}(\VAR{V} : \NAMEHYPER{../.}{SL-2-Expressions}{sl-values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Objects}{objects} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{checked} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{cast-to-type}
                       ( \VAR{V}, \\&\quad \quad \quad \quad \quad 
                         \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Objects}{objects} )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{fun}(\VAR{V} : \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Abstraction}{Functions}{functions}
                                                                         ( \_,   
                                                                           \_ ) \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{checked} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{cast-to-type}
                       ( \VAR{V}, \\&\quad \quad \quad \quad \quad 
                         \NAMEHYPER{../../../../../Funcons-beta/Values/Abstraction}{Functions}{functions}
                           ( \_, \\&\quad \quad \quad \quad \quad \quad 
                             \_ ) )
\end{align*}
\section*{Further funcons}\hypertarget{further-funcons}{}\label{further-funcons}

Some of the funcons defined below might be sufficiently reuseful for
  inclusion in Funcons-beta.

\subsection*{Binding}\hypertarget{binding}{}\label{binding}

\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{scope-closed}(\VAR{Env} : \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{envs}, \VAR{X} :  \TO \VAR{T}) :  \TO \VAR{T} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{closed} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{scope}
                       ( \VAR{Env}, \\&\quad \quad \quad \quad \quad 
                         \VAR{X} )
\end{align*}
$\SHADE{\NAMEREF{scope-closed}
           ( \VAR{D},   
             \VAR{X} )}$ evaluates $\SHADE{\VAR{D}}$ in the current environment, then
  evaluates $\SHADE{\VAR{X}}$ in the resulting environment. Note the difference between
  $\SHADE{\NAMEREF{scope-closed}
           ( \VAR{D},   
             \VAR{X} )}$ and $\SHADE{\NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{closed}
           ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{scope}
               ( \VAR{D},    
                 \VAR{X} ) )}$: the latter is equivalent
  to $\SHADE{\NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{closed}
           ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{scope}
               ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{closed} ~
                   \VAR{D},    
                 \VAR{X} ) )}$, where $\SHADE{\VAR{D}}$ cannot reference any bindings.

\subsection*{Local variables}\hypertarget{local-variables}{}\label{local-variables}

The local variable map is stored in a variable bound to {}``local-variables{}''.
  Initialising a local variable updates the stored local variable map. 
  Subsequent assignments to a local variable do not change the stored map.

\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{initialise-local-variables} :  \TO \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{environments} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bind}
                     ( \STRING{local-{}variables}, \\&\quad \quad \quad \quad 
                       \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{allocate-initialised-variable}
                         ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{environments}, \\&\quad \quad \quad \quad \quad 
                           \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Maps}{map}
                             (  ~  ) ) )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{local-variable}(\VAR{I} : \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{ids}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{variables} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{checked} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Maps}{lookup}
                       ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{assigned} ~
                           \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bound} ~
                             \STRING{local-{}variables}, \\&\quad \quad \quad \quad \quad 
                         \VAR{I} )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{local-variable-initialise}(\VAR{I} : \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{ids}, \VAR{V} : \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Null}{null-type} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{assign}
                     ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bound} ~
                         \STRING{local-{}variables}, \\&\quad \quad \quad \quad 
                       \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Maps}{map-override}
                         ( \{ \VAR{I} \mapsto 
                                \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{allocate-initialised-variable}
                                  ( \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{values}, \\&\quad \quad \quad \quad \quad \quad 
                                    \VAR{V} ) \}, \\&\quad \quad \quad \quad \quad 
                           \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{assigned} ~
                             \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bound} ~
                               \STRING{local-{}variables} ) )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{local-variable-assign}(\VAR{I} : \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{ids}, \VAR{V} : \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{values}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Null}{null-type} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{else}
                     ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{assign}
                         ( \NAMEREF{local-variable} ~
                             \VAR{I}, \\&\quad \quad \quad \quad \quad 
                           \VAR{V} ), \\&\quad \quad \quad \quad 
                       \NAMEREF{local-variable-initialise}
                         ( \VAR{I}, \\&\quad \quad \quad \quad \quad 
                           \VAR{V} ) )
\end{align*}
\subsection*{Global bindings}\hypertarget{global-bindings}{}\label{global-bindings}

The global bindings map is stored in a variable bound to {}``global-bindings{}''. 
  Global declaration or redeclaration of an identifier involves updating the
  stored global environment.

\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{initialise-global-bindings} :  \TO \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{environments} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bind}
                     ( \STRING{global-{}bindings}, \\&\quad \quad \quad \quad 
                       \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{allocate-initialised-variable}
                         ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{environments}, \\&\quad \quad \quad \quad \quad 
                           \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Maps}{map}
                             (  ~  ) ) )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{override-global-bindings}(\VAR{E} : \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{environments}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Null}{null-type} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{assign}
                     ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bound} ~
                         \STRING{global-{}bindings}, \\&\quad \quad \quad \quad 
                       \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Maps}{map-override}
                         ( \VAR{E}, \\&\quad \quad \quad \quad \quad 
                           \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{assigned} ~
                             \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bound} ~
                               \STRING{global-{}bindings} ) )
\end{align*}
\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{global-bound}(\VAR{I} : \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{ids}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{values} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Abnormal}{Failing}{checked} ~
                     \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Maps}{lookup}
                       ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Storing}{assigned} ~
                           \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Binding}{bound} ~
                             \STRING{global-{}bindings}, \\&\quad \quad \quad \quad \quad 
                         \VAR{I} )
\end{align*}
\subsection*{Composite input and output}\hypertarget{composite-input-and-output}{}\label{composite-input-and-output}

\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{read-line} :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Strings}{strings} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Giving}{give}
                     ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Interacting}{read}, \\&\quad \quad \quad \quad 
                       \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Flowing}{if-true-else}
                         ( \NAMEHYPER{../../../../../Funcons-beta/Values}{Value-Types}{is-eq}
                             ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Giving}{given}, \\&\quad \quad \quad \quad \quad \quad 
                               \ATOM{\BACKSLASH n} ), \\&\quad \quad \quad \quad \quad 
                           \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Lists}{nil}, \\&\quad \quad \quad \quad \quad 
                           \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Lists}{cons}
                             ( \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Giving}{given}, \\&\quad \quad \quad \quad \quad \quad 
                               \NAMEREF{read-line} ) ) )
\end{align*}
$\SHADE{\NAMEREF{read-line}}$ reads characters from the standard input until a linefeed
  character, giving the string formed from the sequence of characters
  excluding the newline. If the input ends before the end of the line,
  it fails.

\begin{align*}
  \KEY{Funcon} ~ 
  & \NAMEDECL{print-line}(\VAR{S} : \NAMEHYPER{../../../../../Funcons-beta/Values/Composite}{Strings}{strings}) :  \TO \NAMEHYPER{../../../../../Funcons-beta/Values/Primitive}{Null}{null-type} \\
  & \quad \leadsto \NAMEHYPER{../../../../../Funcons-beta/Computations/Normal}{Interacting}{print}
                     ( \VAR{S}, \\&\quad \quad \quad \quad 
                       \STRING{\BACKSLASH n} )
\end{align*}
